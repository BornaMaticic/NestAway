{"ast":null,"code":"import _classCallCheck from \"/Users/user/Codeclan/e26_workfiles/week_14/day_05/Project/NestAway/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/user/Codeclan/e26_workfiles/week_14/day_05/Project/NestAway/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/user/Codeclan/e26_workfiles/week_14/day_05/Project/NestAway/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/user/Codeclan/e26_workfiles/week_14/day_05/Project/NestAway/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/user/Codeclan/e26_workfiles/week_14/day_05/Project/NestAway/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/user/Codeclan/e26_workfiles/week_14/day_05/Project/NestAway/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/user/Codeclan/e26_workfiles/week_14/day_05/Project/NestAway/frontend/src/containers/siteContainer.js\";\nimport React, { Component, Fragment } from 'react';\nimport Request from '../helpers/request.js';\nimport BookingForm from '../components/BookingForm.js';\nimport NavBar from '../components/NavBar.js';\nimport PropertyList from '../components/PropertyList.js';\n\nvar siteContainer =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(siteContainer, _Component);\n\n  function siteContainer(props) {\n    var _this;\n\n    _classCallCheck(this, siteContainer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(siteContainer).call(this, props));\n    _this.state = {\n      properties: [],\n      filteredProperties: []\n    };\n    _this.criteria = null;\n    _this.handleBookingCriteriaSubmit = _this.handleBookingCriteriaSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(siteContainer, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var request = new Request(); // TODO check api route with backend\n\n      request.get('/api/properties').then(function (data) {\n        _this2.setState({\n          properties: data._embedded.properties\n        });\n      });\n    }\n  }, {\n    key: \"handleBookingCriteriaSubmit\",\n    value: function handleBookingCriteriaSubmit(criteria) {\n      var _this3 = this;\n\n      this.criteria = criteria;\n      var selectedProperties = this.state.properties;\n      selectedProperties = selectedProperties.filter(function (property) {\n        return property.capacity >= _this3.criteria.capacity;\n      });\n      this.setState({\n        filteredProperties: selectedProperties\n      });\n      console.log(this.state.filteredProperties);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }, React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }, React.createElement(NavBar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }), React.createElement(BookingForm, {\n        filteredProperties: this.state.filteredProperties,\n        onCriteriaSubmit: this.handleBookingCriteriaSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }), React.createElement(Bookings, {\n        properties: this.state.properties,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      })));\n    } // <PropertyList properties = {this.state.properties}/>\n\n  }]);\n\n  return siteContainer;\n}(Component);\n\nexport default siteContainer;","map":{"version":3,"sources":["/Users/user/Codeclan/e26_workfiles/week_14/day_05/Project/NestAway/frontend/src/containers/siteContainer.js"],"names":["React","Component","Fragment","Request","BookingForm","NavBar","PropertyList","siteContainer","props","state","properties","filteredProperties","criteria","handleBookingCriteriaSubmit","bind","request","get","then","data","setState","_embedded","selectedProperties","filter","property","capacity","console","log"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AAEA,OAAOC,OAAP,MAAoB,uBAApB;AAEA,OAAOC,WAAP,MAAwB,8BAAxB;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AACA,OAAOC,YAAP,MAAyB,+BAAzB;;IAGMC,a;;;;;AAEJ,yBAAYC,KAAZ,EAAkB;AAAA;;AAAA;;AAChB,uFAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACXC,MAAAA,UAAU,EAAE,EADD;AAEXC,MAAAA,kBAAkB,EAAE;AAFT,KAAb;AAKA,UAAKC,QAAL,GAAgB,IAAhB;AAEA,UAAKC,2BAAL,GAAmC,MAAKA,2BAAL,CAAiCC,IAAjC,uDAAnC;AATgB;AAUjB;;;;wCAEkB;AAAA;;AACjB,UAAIC,OAAO,GAAG,IAAIZ,OAAJ,EAAd,CADiB,CAEjB;;AACAY,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BC,IAA/B,CAAoC,UAACC,IAAD,EAAU;AAC5C,QAAA,MAAI,CAACC,QAAL,CAAc;AAACT,UAAAA,UAAU,EAAEQ,IAAI,CAACE,SAAL,CAAeV;AAA5B,SAAd;AACD,OAFD;AAGD;;;gDAG2BE,Q,EAAS;AAAA;;AACnC,WAAKA,QAAL,GAAgBA,QAAhB;AACA,UAAIS,kBAAkB,GAAG,KAAKZ,KAAL,CAAWC,UAApC;AACAW,MAAAA,kBAAkB,GAAGA,kBAAkB,CAACC,MAAnB,CAA0B,UAAAC,QAAQ;AAAA,eACrDA,QAAQ,CAACC,QAAT,IAAqB,MAAI,CAACZ,QAAL,CAAcY,QADkB;AAAA,OAAlC,CAArB;AAEE,WAAKL,QAAL,CAAc;AAACR,QAAAA,kBAAkB,EAAEU;AAArB,OAAd;AACAI,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKjB,KAAL,CAAWE,kBAAvB;AACD;;;6BAIO;AACN,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADA,EAEA,oBAAC,WAAD;AACA,QAAA,kBAAkB,EAAE,KAAKF,KAAL,CAAWE,kBAD/B;AACmD,QAAA,gBAAgB,EAAE,KAAKE,2BAD1E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFA,EAIA,oBAAC,QAAD;AAAU,QAAA,UAAU,EAAI,KAAKJ,KAAL,CAAWC,UAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJA,CADA,CADF;AAUD,K,CAED;;;;;EA/CwBT,S;;AAmD1B,eAAeM,aAAf","sourcesContent":["import React, { Component, Fragment } from 'react';\n\nimport Request from '../helpers/request.js'\n\nimport BookingForm from '../components/BookingForm.js';\nimport NavBar from '../components/NavBar.js';\nimport PropertyList from '../components/PropertyList.js';\n\n\nclass siteContainer extends Component{\n\n  constructor(props){\n    super(props);\n    this.state = {\n      properties: [],\n      filteredProperties: []\n\n    }\n    this.criteria = null;\n\n    this.handleBookingCriteriaSubmit = this.handleBookingCriteriaSubmit.bind(this);\n  }\n\n  componentDidMount(){\n    let request = new Request()\n    // TODO check api route with backend\n    request.get('/api/properties').then((data) => {\n      this.setState({properties: data._embedded.properties})\n    })\n  }\n\n\n  handleBookingCriteriaSubmit(criteria){\n    this.criteria = criteria;\n    let selectedProperties = this.state.properties;\n    selectedProperties = selectedProperties.filter(property =>\n      property.capacity >= this.criteria.capacity);\n      this.setState({filteredProperties: selectedProperties});\n      console.log(this.state.filteredProperties);\n    }\n\n\n\n    render(){\n      return (\n        <div>\n        <Fragment>\n        <NavBar/>\n        <BookingForm\n        filteredProperties={this.state.filteredProperties} onCriteriaSubmit={this.handleBookingCriteriaSubmit} />\n        <Bookings properties = {this.state.properties}/>\n        </Fragment>\n        </div>\n      )\n    }\n\n    // <PropertyList properties = {this.state.properties}/>\n\n  }\n\n  export default siteContainer;\n"]},"metadata":{},"sourceType":"module"}